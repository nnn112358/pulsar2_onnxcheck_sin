import React from 'react';
import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';

const SineWaveComparison = () => {
  // Parse the data from the provided text
  const rawData = `input	ax	onnx
0	0	0
1	0.125242591	0.125333235
2	0.250485182	0.248689905
3	0.367900014	0.368124545
4	0.477487326	0.481753707
5	0.587074518	0.587785244
6	0.681006551	0.684547126
7	0.767110825	0.770513296
8	0.84538734	0.844327986
9	0.900181055	0.904827058
10	0.947147012	0.95105654
11	0.97845757	0.982287288
12	0.994112968	0.998026729
13	0.994112968	0.998026729
14	0.986285329	0.982287228
15	0.954974651	0.95105648
16	0.908008695	0.904826999
17	0.84538734	0.844327807
18	0.774938464	0.770513237
19	0.68883419	0.684547126
20	0.594902277	0.587785244
21	0.493142605	0.481753588
22	0.375727773	0.368124396
23	0.258312821	0.248689905
24	0.14089787	0.12533319
25	0.015655279	-8.74228E-08
26	-0.109587252	-0.125333369
27	-0.234829843	-0.248690069
28	-0.352244735	-0.368124783
29	-0.469659686	-0.481753707
30	-0.579246879	-0.587785304
31	-0.673178852	-0.684547186
32	-0.759283125	-0.770513356
33	-0.8375597	-0.844328046
34	-0.900180995	-0.904827178
35	-0.947147012	-0.9510566
36	-0.97845763	-0.982287228
37	-0.994112968	-0.998026729
38	-1.001940608	-0.998026729
39	-0.986285269	-0.982287228
40	-0.954974651	-0.95105648
41	-0.915836334	-0.904826999
42	-0.853215039	-0.844327807
43	-0.782766104	-0.770513058
44	-0.69666183	-0.684546828
45	-0.602729917	-0.587784946
46	-0.500970304	-0.481753707
47	-0.391383052	-0.368124098
48	-0.27396816	-0.248689815
49	-0.148725569	-0.125332639
50	-0.023482978	1.74846E-07
51	0.101759553	0.125333935
52	0.227002144	0.248690158
53	0.344417095	0.368124425
54	0.461832047	0.481754005
55	0.563591599	0.587785244
56	0.665351152	0.684547424
57	0.751455426	0.770513296
58	0.82973206	0.844327986
59	0.892353296	0.904827118
60	0.939319372	0.9510566
61	0.97845757	0.982287288
62	0.994112968	0.998026729
63	0.994112968	0.998026729
64	0.986285329	0.982287169
65	0.962802291	0.951056659
66	0.915836334	0.90482682
67	0.861042738	0.844328105
68	0.790593743	0.770512819
69	0.712317109	0.684547305
70	0.618385196	0.587784708
71	0.508798003	0.481753856
72	0.399210691	0.368124664
73	0.28179574	0.248689964
74	0.164380908	0.12533325
75	0.039138317	-2.38498E-08
76	-0.086104274	-0.125333309
77	-0.211346865	-0.248690009
78	-0.328761756	-0.368124723
79	-0.446176648	-0.481753856
80	-0.55576396	-0.587785482
81	-0.657523513	-0.684547305
82	-0.743627787	-0.770513475
83	-0.821904421	-0.844328165
84	-0.884525716	-0.904827237
85	-0.939319313	-0.951056361
86	-0.97062999	-0.982287347
87	-0.994112968	-0.998026788
88	-1.001940608	-0.998026669
89	-0.986285269	-0.982287288
90	-0.962802291	-0.951056302
91	-0.923663974	-0.904826701
92	-0.868870378	-0.844327986
93	-0.798421443	-0.770513237
94	-0.720144808	-0.684546351
95	-0.626212895	-0.58778441
96	-0.524453282	-0.481753528
97	-0.41486603	-0.368124366
98	-0.297451138	-0.248688713
99	-0.172208548	-0.125332952
100	-0.046965957	3.49691E-07
101	0.078276634	0.125333622
102	0.203519225	0.248691261
103	0.320934057	0.368125021
104	0.438349009	0.481754154
105	0.54793632	0.587785721
106	0.641868234	0.684546888
107	0.735800147	0.770513713
108	0.814076781	0.844328344
109	0.884525657	0.904826999
110	0.931491613	0.95105648
111	0.97062993	0.982287407
112	0.994112968	0.998026788
113	0.994112968	0.998026729
114	0.994112968	0.982287228
115	0.97062993	0.951056182
116	0.931491613	0.904826939
117	0.876698017	0.844327748
118	0.806249142	0.770512998
119	0.727972507	0.684546173
120	0.634040594	0.587784946
121	0.532280922	0.48175329
122	0.422693729	0.368124068
123	0.305278778	0.248690248
124	0.187863827	0.125332624
125	0.062621236	-6.75532E-07
126	-0.062621295	-0.12533395
127	-0.305278778	-0.248689726
128	-0.42269367	-0.368125319
129	-0.532280922	-0.481754422
130	-0.634040534	-0.587784469
131	-0.727972507	-0.684547782
132	-0.806249082	-0.770513892
133	-0.876698017	-0.844328523
134	-0.931491673	-0.904826701
135	-0.97062999	-0.951056898
136	-0.994112968	-0.982287467
137	-1.001940608	-0.998026669
138	-0.994112968	-0.998026788
139	-0.97062999	-0.98228699
140	-0.931491673	-0.951056063
141	-0.876698017	-0.904827237
142	-0.814076781	-0.844328105
143	-0.735800147	-0.770512223
144	-0.641868234	-0.684547246
145	-0.540108621	-0.587785423
146	-0.438349009	-0.481753796
147	-0.320934117	-0.368122876
148	-0.195691526	-0.248689935
149	-0.070448935	-0.125333235
150	0.054793596	4.76995E-08
151	0.172208548	0.125333324
152	0.297451138	0.248690039
153	0.41486609	0.368124753
154	0.524453282	0.481753916
155	0.626212835	0.587785482
156	0.720144868	0.684547365
157	0.798421383	0.770513535
158	0.868870378	0.844328165
159	0.923663974	0.904827237
160	0.962802291	0.951056659
161	0.986285329	0.982287347
162	0.994112968	0.998026788
163	0.994112968	0.998026788
164	0.97062993	0.982287109
165	0.939319372	0.951056242
166	0.884525657	0.904826701
167	0.821904421	0.84432739
168	0.743627787	0.770512581
169	0.649695873	0.684546351
170	0.55576396	0.587785959
171	0.446176648	0.481754363
172	0.328761816	0.368123442
173	0.211346865	0.248688683
174	0.086104274	0.125331968
175	-0.039138317	-1.32722E-06
176	-0.164380908	-0.125334606
177	-0.2817958	-0.248689443
178	-0.399210691	-0.368124157
179	-0.516625643	-0.48175332
180	-0.618385196	-0.587786496
181	-0.712317109	-0.684548259
182	-0.790593743	-0.770514309
183	-0.861042738	-0.84432888
184	-0.915836334	-0.904826999
185	-0.962802291	-0.95105648
186	-0.986285269	-0.982287228
187	-1.001940608	-0.998026729
188	-0.994112968	-0.998026609
189	-0.97845763	-0.98228687
190	-0.939319313	-0.951055884
191	-0.892353356	-0.904826939
192	-0.82973206	-0.844327748
193	-0.751455426	-0.770512998
194	-0.665351152	-0.684546769
195	-0.563591599	-0.587784886
196	-0.454004347	-0.481751561
197	-0.344417095	-0.36812228
198	-0.219174504	-0.248689324
199	-0.101759613	-0.125332594
200	0.023483038	6.99382E-07
201	0.14872551	0.12533398
202	0.273968101	0.24869065
203	0.391383052	0.368125319
204	0.500970244	0.481756151
205	0.610557556	0.587784469
206	0.70448947	0.684547842
207	0.782766104	0.770513892
208	0.853215098	0.844328523
209	0.915836334	0.904827535
210	0.954974651	0.951056898
211	0.986285329	0.982287467
212	0.994112968	0.998026669
213	0.994112968	0.998026788
214	0.97845757	0.98228699
215	0.947147012	0.951056063
216	0.900181055	0.904826403
217	0.8375597	0.844327092
218	0.759283066	0.770513415
219	0.673178792	0.684547246
220	0.571419239	0.587785423
221	0.469659686	0.481753796
222	0.352244735	0.368122876
223	0.234829783	0.248688087
224	0.109587312	0.125331312
225	-0.015655339	-7.15493E-08
226	-0.14089787	-0.125333354
227	-0.258312821	-0.248690039
228	-0.383555412	-0.368124753
229	-0.493142664	-0.481753916
230	-0.594902277	-0.587787032
231	-0.69666183	-0.684548736
232	-0.774938464	-0.770513535
233	-0.853215039	-0.844328165
234	-0.908008695	-0.904827297
235	-0.954974651	-0.951056719
236	-0.986285269	-0.982287347
237	-1.001940608	-0.998026788
238	-0.994112968	-0.99802655
239	-0.97845763	-0.982287467
240	-0.947147012	-0.951056242
241	-0.900180995	-0.904826701
242	-0.8375597	-0.84432739
243	-0.767110765	-0.770512581
244	-0.681006551	-0.684546292
245	-0.587074578	-0.58778435
246	-0.477487326	-0.481754333
247	-0.367900074	-0.36812523
248	-0.242657483	-0.248688683
249	-0.125242591	-0.125331938
250	0	1.35106E-06
251	0.125242591	0.125334635
252	0.250485182	0.248691291
253	0.367900014	0.368124187
254	0.485314965	0.481753379`;

  const parseData = () => {
    const lines = rawData.split('\n');
    const headers = lines[0].split('\t');
    
    return lines.slice(1).map(line => {
      const values = line.split('\t');
      const dataPoint = {};
      
      headers.forEach((header, index) => {
        dataPoint[header] = parseFloat(values[index]);
      });
      
      return dataPoint;
    });
  };

  const data = parseData();

  // Function to determine which range of data to display
  const getDataSlice = (startIdx, endIdx) => {
    return data.slice(startIdx, endIdx);
  };

  return (
    <div className="flex flex-col items-center w-full p-4">
      <h2 className="text-xl font-bold mb-6">Sine Wave Comparison: ax vs onnx</h2>
      
      <div className="w-full">
        <h3 className="text-lg font-semibold mb-2">Full Range (0-254)</h3>
        <div className="h-64 w-full">
          <ResponsiveContainer width="100%" height="100%">
            <LineChart
              data={data}
              margin={{ top: 5, right: 30, left: 20, bottom: 5 }}
            >
              <CartesianGrid strokeDasharray="3 3" />
              <XAxis dataKey="input" />
              <YAxis domain={[-1.1, 1.1]} />
              <Tooltip />
              <Legend />
              <Line type="monotone" dataKey="ax" stroke="#8884d8" dot={false} name="ax" />
              <Line type="monotone" dataKey="onnx" stroke="#82ca9d" dot={false} name="onnx" />
            </LineChart>
          </ResponsiveContainer>
        </div>
      </div>
      
      <div className="w-full mt-8">
        <h3 className="text-lg font-semibold mb-2">First Cycle (0-50)</h3>
        <div className="h-64 w-full">
          <ResponsiveContainer width="100%" height="100%">
            <LineChart
              data={getDataSlice(0, 51)}
              margin={{ top: 5, right: 30, left: 20, bottom: 5 }}
            >
              <CartesianGrid strokeDasharray="3 3" />
              <XAxis dataKey="input" />
              <YAxis domain={[-1.1, 1.1]} />
              <Tooltip />
              <Legend />
              <Line type="monotone" dataKey="ax" stroke="#8884d8" dot={false} name="ax" />
              <Line type="monotone" dataKey="onnx" stroke="#82ca9d" dot={false} name="onnx" />
            </LineChart>
          </ResponsiveContainer>
        </div>
      </div>
      
      <div className="w-full mt-8">
        <h3 className="text-lg font-semibold mb-2">Difference (ax - onnx)</h3>
        <div className="h-64 w-full">
          <ResponsiveContainer width="100%" height="100%">
            <LineChart
              data={data.map(point => ({
                input: point.input,
                difference: (point.ax - point.onnx).toFixed(6) * 1
              }))}
              margin={{ top: 5, right: 30, left: 20, bottom: 5 }}
            >
              <CartesianGrid strokeDasharray="3 3" />
              <XAxis dataKey="input" />
              <YAxis domain={[-0.02, 0.02]} />
              <Tooltip />
              <Legend />
              <Line 
                type="monotone" 
                dataKey="difference" 
                stroke="#ff7300" 
                dot={false} 
                name="ax - onnx" 
              />
            </LineChart>
          </ResponsiveContainer>
        </div>
      </div>
    </div>
  );
};

export default SineWaveComparison;
